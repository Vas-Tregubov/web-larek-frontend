# Проектная работа "Веб-ларек"

### Стек технологий:

- **HTML**
- **SCSS**
- **TS**
- **Webpack**

### Структура проекта:

- **src/** — Исходные файлы проекта
- **src/components/** — Папка с TS компонентами
- **src/components/base/** — Папка с базовым кодом

### Важные файлы:

- **src/pages/index.html** — HTML-файл главной страницы
- **src/types/index.ts** — Файл с типами
- **src/index.ts** — Точка входа приложения
- **src/utils/constants.ts** — Файл с константами
- **src/utils/utils.ts** — Файл с утилитами

## Архитектура приложения

### Код приложения составлен в парадигме MVP:

- **Слой Model**: Отвечает за хранение и изменение данных.
- **Слой View**: Отвечает за отображение данных на странице.
- **Слой Presenter**: Отвечает за связь между View и Model.

### Базовый код

#### Класс Api

Содержит в себе базовую логику отправки запросов. В конструктор передается базовый адрес сервера и объект с заголовками запросов.

Методы класса:

- `get` — выполняет GET-запрос на переданный в параметрах ендпоинт и возвращает промис с объектом, которым ответил сервер;
- `post` — принимает объект с данными, которые будут переданы в JSON-формате в теле запроса, и отправляет эти данные на ендпоинт, переданный как параметр при вызове метода. По умолчанию выполняется POST-запрос, но метод запроса может быть переопределен заданием третьего параметра при вызове.

#### Класс Component

Класс является абстрактным и используется как базовый для всех компонентов слоя представления. Он предоставляет основные методы для рендеринга содержимого и управления состоянием элементов.

Конструктор класса:

- `constructor(container: HTMLElement)` - Конструктор принимает основной контейнер для компонента. Этот контейнер будет использоваться для вставки содержимого компонента.

Методы класса:

- `render(data?: Partial<T>): HTMLElement` - Метод для отображения данных в компоненте. Принимает объект данных типа `T` (или его частичную версию через `Partial<T>`), обновляет поля компонента с помощью `Object.assign()` и возвращает контейнер компонента с обновленным содержимым.
- `toggleElementState(element: HTMLElement, isActive: boolean): void` - Метод для управления состоянием элемента. Если `isActive` равно `false`, устанавливается атрибут `disabled`, который деактивирует элемент. Если `isActive` равно `true`, атрибут `disabled` удаляется, активируя элемент.
- `updateText(element: HTMLElement, value: string): void` — Метод для обновления текста в указанном элементе. Устанавливает текстовое содержимое элемента, преобразуя переданное значение в строку с помощью `String(value)`.

#### Класс EventEmitter

Брокер событий позволяет отправлять события и подписываться на события, происходящие в системе. Класс используется в Presenter для обработки событий и в слоях приложения для генерации событий.

Основные методы, реализуемые классом, описаны интерфейсом `IEvents`:

- `on` — подписка на событие;
- `emit` — инициализация события;
- `trigger` — возвращает функцию, при вызове которой инициализируется требуемое в параметрах событие.

#### Класс Model

Класс представляет собой базовую реализацию модели данных для слоя Model в архитектуре MVP. Используется для управления данными и взаимодействия с брокером событий.

Конструктор класса:

- `constructor(data: Partial<T>, events: IEvents)` - Конструктор принимает `data: Partial<T>` - частичные данные модели, которые будут скопированы в объект модели через Object.assign. Это позволяет модели быть гибкой к изменениям структуры данных и `events: IEvents` - экземпляр брокера событий для генерации и обработки событий.

Методы класса:

- `triggerEvent(eventName: string, data?: object)` - Инициирует событие с указанным названием и переданными данными. Используется для уведомления других слоев приложения об изменениях в модели.

### Слой Model

<!-- #### Класс ProductModel

Класс отвечает за управление информацией о товарах, включая их загрузку, обновление и управление состоянием.

Конструктор класса:

- `events: EventEmitter` — Экземпляр класса EventEmitter для инициации и обработки событий при изменении данных заказа.

Поля класса:

- `id: string` — Уникальный идентификатор товара.
- `description: string` — Описание товара.
- `image: string` — Путь к изображению товара.
- `title: string` — Название товара.
- `category: string` — Категория товара.
- `price: number | null` — Цена товара. Может быть `null`, если цена не указана.

Методы класса:

- `getProductDetails()` — Метод для получения полной информации о продукте в виде объекта. Возвращает объект с данными продукта.
- `updateProductDetails(update: { id?: string; description?: string; image?: string; title?: string; category?: string; price?: number | null })` — Метод для обновления информации о продукте. Принимает объект с новыми значениями полей продукта и обновляет соответствующие свойства.
- `validateProduct()` — Метод для проверки корректности данных продукта, таких как наличие всех необходимых полей и корректность значений. Возвращает `true`, если продукт корректен, и `false`, если есть ошибки.

#### Класс OrderModel

Класс отвечает за управление информацией о заказах.

Конструктор класса:

- `events: EventEmitter` — Экземпляр класса EventEmitter для инициации и обработки событий при изменении данных заказа.

Поля класса:

- `payment: string` — Способ оплаты заказа (например, "online").
- `email: string` — Электронная почта покупателя.
- `phone: string` — Телефонный номер покупателя.
- `address: string` — Адрес доставки.
- `total: number` — Общая сумма заказа.
- `items: string[]` — Список идентификаторов товаров в заказе.

Методы класса:

- `calculateTotal()` — Метод для вычисления общей суммы заказа на основе цен товаров. Использует данные о товарах и их количество в заказе.
- `validateOrder()` — Метод для проверки корректности данных заказа, таких как сумма и наличие всех необходимых полей. Возвращает `true`, если заказ корректен, и `false`, если есть ошибки.
- `getOrderDetails()` — Метод для получения полной информации о заказе в виде объекта. Возвращает объект с данными заказа.
- `updateOrderDetails(update: { payment?: string; email?: string; phone?: string; address?: string; total?: number; items?: string[] })` — Метод для обновления информации о заказе. Принимает объект с новыми значениями полей заказа и обновляет соответствующие свойства. -->

### Слой View

Классы отвечают за отображение данных в соответствующих элементах интерфейса (DOM-элементах), предоставляя пользователю возможность взаимодействия с информацией.

#### Общий класс ModalCommon

Наследуется от базового класса `Component` и представляет собой универсальное модальное окно. Он предоставляет методы для управления жизненным циклом модального окна (открытие, закрытие) и взаимодействиями с пользователем (например, закрытие через клавишу или мышь). Модальное окно использует интерфейс `IModal` для передачи данных и брокер событий (`IEvents`) для обработки событий.

Конструктор класса:

- `constructor(selector: string, events: IEvents, onAddToCart: (productId: string) => void)` — Инициализирует модальное окно, принимает селектор для нахождения элемента в DOM, экземпляр `EventEmitter` для обработки событий и функцию `onAddToCart`, которая будет вызываться при добавлении товара в корзину.

Поля класса:

- `modalContent: HTMLElement` - Представляет собой область контента модального окна, в которую можно динамически вставлять содержимое.
- `closeButtonElement: HTMLButtonElement` - Кнопка закрытия модального окна.
- `events: IEvents` - Обработчик событий для работы с событиями, связанными с модальным окном.

Методы класса:

- `content(value: HTMLElement)` - Сеттер для контента модального окна. Заменяет старое содержимое на новое.
- `open()` - Открывает модальное окно, добавляя класс `modal_active` и генерирует событие `modal:open`. Также добавляется обработчик для закрытия окна при нажатии клавиши Escape.
- `close()` - Закрывает модальное окно, удаляя класс `modal_active` и генерирует событие `modal:close`. Удаляется обработчик клавиши Escape.
- `onEscapeKey(evt: KeyboardEvent)` - Обрабатывает нажатие клавиши Escape. Если модальное окно активно, оно будет закрыто.
- `render(data: IModal)` - Рендерит модальное окно с переданными данными и вызывает метод `open()` для отображения окна. Возвращает контейнер с модальным окном.

#### Общий класс FormCommon

Реализует форму с возможностью обработки ошибок, обновления состояний и взаимодействия с полями формы. Этот класс наследует от абстрактного компонента `Component`, что позволяет ему работать с различными типами данных и управлять состоянием формы. Он также предоставляет обработку событий, таких как изменение значений в полях и отправка формы.

Конструктор класса:

- `constructor(container: HTMLFormElement, events: IEvents)` — Конструктор принимает контейнер формы `(HTMLFormElement)` и экземпляр класса `EventEmitter` для обработки событий. В конструкторе также происходят привязки элементов формы, таких как кнопка отправки и элемент для отображения ошибок.

Поля класса:

- `submitButton` — Кнопка для отправки формы.
- `errorMessages` — Элемент для отображения ошибок.
- `container` — Основной контейнер формы.
- `events` — Экземпляр для обработки событий, таких как отправка формы и изменение ввода.

Методы класса:

- `onChangeInput(field: keyof T, value: string)` — Обработчик изменения значения в поле формы. Вызывает событие input:change для передачи обновленных данных в другие части приложения.
- `valid` — Сеттер для кнопки отправки формы. Если `value` равно `false`, кнопка будет отключена, если `true` — включена.
- `errors` — Сеттер для отображения ошибок на форме. Устанавливает текст ошибки в элемент для отображения ошибок.
- `render(state: Partial<T> & IForm)` — Метод рендеринга формы с учетом состояния. Принимает данные формы и отображает их, обновляя элементы с помощью метода `render` базового компонента.

#### Класс CatalogPage

Класс `CatalogPage` представляет компонент для отображения каталога товаров на странице, а также управления корзиной покупок. Он позволяет обновлять счётчик товаров в корзине, отображать список товаров и блокировать страницу при необходимости.

Конструктор класса:

- `constructor(container: HTMLElement, events: IEvents)` — Конструктор принимает контейнер страницы и экземпляр класса для работы с событиями. Он инициализирует элементы страницы, такие как счетчик корзины, каталог товаров, кнопку корзины и обертку страницы. Также добавляется обработчик события для открытия корзины при клике на кнопку корзины.

Поля класса:

- `counter: HTMLElement` - Элемент для отображения счетчика товаров в корзине.
- `catalog: HTMLElement` - Элемент, который представляет галерею (каталог товаров), в котором будут отображаться элементы.
- `basket: HTMLButtonElement` - Кнопка, которая открывает корзину при клике.
- `wrapper: HTMLElement` - Обертка страницы, которая может быть заблокирована для предотвращения взаимодействия с остальной частью страницы.

Методы класса:

- `set count(counter: number)` — Метод для обновления отображаемого счетчика товаров в корзине. Принимает число и отображает его в элементе с классом `.header__basket-counter.`
- `set setCatalogItems(items: HTMLElement[])` — Метод для обновления содержимого каталога. Принимает массив HTML-элементов и заменяет текущее содержимое каталога.
- `set isContentLocked(value: boolean)` — Метод для блокировки или разблокировки содержимого страницы. Если значение value равно `true`, добавляется класс `page__wrapper_locked`, который блокирует контент. Если `value` равно `false`, класс удаляется, разблокируя контент.

#### Класс Basket

Представляет корзину покупок на странице и управляет отображением списка товаров, общей стоимостью и состоянием кнопки для оформления заказа. Он наследуется от базового класса `Component` и предоставляет методы для обновления контента корзины и управления состоянием элементов.

Конструктор класса:

- `constructor(container: HTMLElement, events: IEvents)` — Инициализирует корзину, устанавливая элементы DOM и слушатели событий, в том числе для кнопки оформления заказа, которая отправляет событие `order:open`.

Поля класса:

- `items` — Элемент, содержащий список товаров корзины.
- `price` — Элемент, отображающий общую стоимость корзины.
- `button` — Кнопка для перехода к оформлению заказа.
- `container` — Контейнер, в котором содержится корзина.

Методы класса:

- `set total(value: number)` - Обновляет отображение общей стоимости в корзине и управляет состоянием кнопки оформления заказа, блокируя её, если стоимость равна нулю.
- `set list(items: HTMLElement[])` - Заменяет текущий список товаров в корзине на новые элементы.

#### Класс Contacts

Представляет форму для ввода контактных данных пользователя, включая имейл и телефон. Наследуется от класса `FormCommon` и предоставляет функциональность для обработки ввода данных и валидации формы.

Конструктор класса:

- `constructor(container: HTMLFormElement, events: IEvents)` — Инициализирует форму, устанавливая элементы DOM для полей ввода имейла и телефона, а также настраивает обработчики событий для отслеживания изменений в полях и отправки формы.

Поля класса:

- `email` — Поле для ввода email пользователя.
- `phone` — Поле для ввода телефонного номера пользователя.

#### Класс Success

Класс представляет модальное окно для отображения успешной транзакции с возможностью закрыть его. Наследуется от базового класса `Component` и управляет отображением информации о списанных синапсах и обработкой кликов по кнопке закрытия окна.

Конструктор класса:

- `constructor(container: HTMLElement, onClick?: (event: MouseEvent) => void)` — Инициализирует компонент, находит необходимые элементы на странице и устанавливает обработчик события для кнопки закрытия, если передан `onClick`.

Поля класса:

- `button` — Кнопка для закрытия окна.
- `price` — Элемент, отображающий информацию о списанных синапсах.

Методы класса:

- `set total(value: number)` — Обновляет текстовое содержимое элемента `price`, отображая количество списанных синапсов.

<!-- #### Класс ProductModal

Расширяет класс Modal. Отвечает за реализацию модального окна, отображающего подробности о товаре. Позволяет взаимодействовать с товаром (например, добавление в корзину).

Конструктор класса:

- `constructor(selector: string, events: IEvents, onAddToCart: (productId: string) => void)` — Конструктор принимает селектор для нахождения модального окна в DOM, экземпляр класса EventEmitter для инициации событий и обработчик `onAddToCart`, который будет вызываться при нажатии на кнопку "В корзину".

Поля класса:

- `modal: HTMLElement` — Элемент модального окна, унаследованный от базового класса Modal.
- `events: IEvents` — Экземпляр класса EventEmitter для инициации и обработки событий.
- `onAddToCart: (productId: string) => void` — Обработчик для выполнения действия добавления товара в корзину.
- `productData: ProductModel | null` — Данные о товаре, которые будут отображаться в модальном окне.

Методы класса:

- `open(product: ProductModel, handleAddToCart: Function): void` — Расширяет метод `open` из базового класса Modal. Принимает объект товара ProductModel и устанавливает его данные в модальном окне. Также принимает функцию-обработчик для добавления товара в корзину, которая сохраняется в поле `handleAddToCart`. Настраивает обработчики событий для кнопок.
- `close(): void` — Расширяет метод `close` из базового класса Modal. Используется для скрытия модального окна и сброса состояния.
- `setupEventListeners(): void` — Приватный метод. Устанавливает слушатели событий для кнопки "В корзину". Вызывается в конструкторе для инициализации специфичных событий.
- `setProductData(product: ProductModel): void` — Метод для установки данных о товаре в модальном окне. Обновляет информацию, отображаемую в модальном окне, на основе переданного объекта ProductModel.

#### Класс CartModal

Расширяет класс `Modal`. Отвечает за отображение и управление корзиной товаров. Позволяет просматривать добавленные товары, изменять их количество, удалять из корзины и переходить к оформлению заказа.

Конструктор класса:

- `constructor(selector: string, events: IEvents, onCheckout: (cartData: T[]) => void)` — Конструктор принимает селектор для нахождения модального окна в DOM, экземпляр класса `EventEmitter` для инициации событий и обработчик `onCheckout`, который будет вызываться при нажатии на кнопку "Оформить заказ".

Поля класса:

- `modal: HTMLElement` — Элемент модального окна, унаследованный от базового класса `Modal`.
- `events: IEvents` — Экземпляр класса `EventEmitter` для инициации и обработки событий.
- `onCheckout: (cartData: T[]) => void` — Обработчик для оформления заказа.
- `cartItems: T[]` — Массив товаров, добавленных в корзину.
- `totalPrice: number` — Общая сумма заказа, рассчитанная на основе цен товаров в корзине.

Методы класса:

- `open(cartItems: IOrder | IOrder[], onCheckout: (cartData: IOrder[]) => void): void` — Расширяет метод `open` из базового класса `Modal`. Принимает один заказ `IOrder` или массив заказов `IOrder[]`, отображает товары в корзине и устанавливает обработчик для оформления заказа. Если передан один заказ, извлекаются товары из него. Устанавливает переданный обработчик `onCheckout`, который будет вызван при оформлении заказа.
- `setupEventListeners(): void` — Приватный метод. Устанавливает слушатели событий для кнопок "Удалить товар" и "Оформить заказ", а также добавляет обработчики для пересчета и отображения общей суммы заказа. Вызывается в конструкторе для инициализации специфичных событий.
- `removeItem(itemId: string): void` — Удаляет товар из корзины по идентификатору `itemId` и пересчитывает общую сумму заказа.
- `calculateTotal(): void` — Пересчитывает общую сумму заказа на основе текущих товаров, добавленных в корзину. Учитывает количество товаров, а также их цену. Общая сумма отображается в элементе DOM, который показывает итоговую цену.
- `updateCartItems(cartItems: { id: string; quantity: number }[]): void` — Обновляет отображаемые товары в корзине на основе переданного массива объектов с полями `id` и `quantity`. Включает пересчёт общей суммы заказа после обновления.
- `submitOrder(): void` — Инициирует процесс оформления заказа, передавая массив товаров через событие или вызов обработчика `onCheckout`.
- `renderCartItems(): void` - Отображает текущие товары в корзине, обновляя список на основе `this.items`.

#### Класс OrderDetailsModal

Расширяет класс Modal. Отвечает за отображение и управление формой оформления заказа в два этапа: выбор способа оплаты и доставки, а затем ввод контактной информации.

Конструктор класса:

- `constructor(selector: string, events: EventEmitter, onSubmit: (orderData: IOrder) => void, orderModel: OrderModel)` — Конструктор принимает селектор для нахождения модального окна в DOM, экземпляр класса `EventEmitter` для инициации событий, обработчик `onSubmit`, который вызывается при окончательном оформлении заказа, и объект модели заказа `orderModel`.

Поля класса:

- `modal: HTMLElement` — Элемент модального окна, унаследованный от базового класса Modal.
- `events: EventEmitter` — Экземпляр класса EventEmitter для обработки событий.
- `onSubmit: (orderData: IOrder) => void` — Обработчик для передачи данных заказа при его оформлении.
- `payment: string` — Выбранный способ оплаты (например, "online" или "cash").
- `address: string` — Адрес доставки, введенный пользователем.
- `email: string` — Email клиента, введенный на втором этапе.
- `phone: string` — Номер телефона клиента, введенный на втором этапе.
- `currentStep: number` — Номер текущего шага оформления (1 или 2).

Методы класса:

- `open(orderData: IOrder): void` — Расширяет метод `open` из базового класса Modal. Отображает первый этап формы (выбор оплаты и доставки), сбрасывает поля и устанавливает события для валидации полей. В случае открытия модального окна все поля сбрасываются в начальное состояние.
- `close(): void` — Расширяет метод `close` из базового класса Modal. Скрывает модальное окно и сбрасывает введенные данные.
- `setupEventListeners(): void` — Приватный метод. Устанавливает слушатели событий для полей формы и кнопок. Управляет переходами между этапами формы, валидацией данных и изменением текста на кнопках ("Далее", "Оплатить", "Оформить"). Вызывается в конструкторе для инициализации специфичных событий.
- `validateStep1(): boolean` — Проверяет правильность заполнения полей первого этапа (способ оплаты и адрес доставки). Если все поля корректны, активирует кнопку "Далее".
- `validateStep2(): boolean` — Проверяет правильность полей второго этапа (email и телефон). При успешной валидации активирует кнопку "Оплатить" или "Оформить".
- `goToNextStep(): void` — Скрывает поля первого этапа и отображает второй этап (контактная информация).
- `submitOrder(cartItems: { id: string; quantity: number }[], total: number): void` — Формирует объект заказа (`IOrder`) и передает его в обработчик `onSubmit`. Включает данные о доставке, способе оплаты и контактной информации. Вызывает валидацию обоих этапов перед отправкой.
- `updatePaymentMethodUI(): void` - Обновляет пользовательский интерфейс в зависимости от выбранного способа оплаты. Изменяет состояние кнопок и блокирует кнопку "Далее", если способ оплаты не выбран.

#### Класс SuccessModal

Расширяет класс `Modal`. Отвечает за отображение сообщения об успешном завершении заказа. Позволяет пользователю увидеть подтверждение успешного оформления и перейти на главную страницу.

Конструктор класса:

- `constructor(selector: string, events: IEvents, onReturnHome: () => void)` — Конструктор принимает селектор для нахождения модального окна в DOM, экземпляр класса EventEmitter для инициации событий и обработчик `onReturnHome`, который вызывается при нажатии на кнопку "За новыми покупками".

Поля класса:

- `modal: HTMLElement` — Элемент модального окна, унаследованный от базового класса `Modal`.
- `events: IEvents` — Экземпляр класса EventEmitter для обработки событий.
- `onReturnHome: () => void` — Обработчик для возвращения на главную страницу.
- `amount: number` — Сумма, списанная за заказ.

Методы класса:

- `open(amount: number): void` — Расширяет метод `open` из базового класса `Modal`. Принимает сумму заказа и отображает ее вместе с сообщением об успешном оформлении. Также устанавливает обработчик для кнопки "За новыми покупками".
- `close(): void` — Расширяет метод `close` из базового класса `Modal`. Используется для скрытия модального окна и сброса состояния.
- `setupEventListeners(): void` — Приватный метод. Устанавливает слушатели событий для кнопки "За новыми покупками", которая вызывает сохраненный обработчик.
- `onReturnHome`. Вызывается в конструкторе для инициализации специфичных событий.

#### Класс Card

Отвечает за отображение карточки товара, включая название, изображение, цену и категорию. Класс используется для отображения товаров на странице сайта и для открытия модального окна с деталями товара при нажатии на карточку.

Конструктор класса:

- `constructor(template: HTMLElement, events: EventEmitter)` — Конструктор принимает DOM элемент темплейта для создания карточек и экземпляр `EventEmitter` для инициации событий.

Поля класса:

- `element: HTMLElement` — Основной DOM элемент карточки.
- `events: EventEmitter` — Экземпляр класса `EventEmitter` для обработки событий.

Методы класса:

- `render(): HTMLElement` — Отображает данные о товаре в карточке. Принимает объект `ProductModel`, который содержит информацию о товаре, и заполняет карточку соответствующими данными. Возвращает обновленный DOM элемент карточки.
- `update(productData: ProductModel): void` — Метод для обновления информации в карточке. Принимает новый объект `ProductModel` и обновляет содержимое карточки на основе новых данных.
- `openProductModal(): void` — Метод для открытия модального окна с подробной информацией о товаре. Генерирует событие для открытия модального окна с деталями товара, используя данные карточки.

#### Класс CardsContainer

Отвечает за отображение блока с карточками товаров на главной странице. Класс управляет размещением карточек в указанном контейнере и обновляет содержимое при изменении данных.

Конструктор класса:

- `constructor(container: HTMLElement, events: IEvents)` — Конструктор принимает элемент контейнера (`container`), в котором будут размещаться карточки, и экземпляр класса `EventEmitter` (`events`) для инициации и обработки событий.

Поля класса:

- `container: HTMLElement` — Элемент контейнера, в который будут добавляться карточки.
- `events: IEvents` — Экземпляр класса `EventEmitter` для обработки событий, связанных с карточками.

Методы класса:

- `render(cardsData: ProductModel[]): void` — Метод для отображения карточек товаров. Принимает массив объектов `ProductModel`, создает карточки на основе этих данных и добавляет их в контейнер. Если массив пуст, ничего не добавляется. Устанавливает слушатели на интерактивные элементы карточек и генерирует события через `EventEmitter`. -->

### Слой Presenter

<!-- #### Класс AppApi

Отвечает за взаимодействие с бэкендом сервиса. Принимает в конструктор экземпляр класса `Api` и предоставляет методы для выполнения операций CRUD и управления корзиной и заказами.

Конструктор класса:

- `constructor(api: Api)` — Конструктор принимает экземпляр класса `Api` для выполнения HTTP-запросов.

Методы класса:

- `getProducts<T>(): Promise<T[]>` — Запрашивает список продуктов с сервера и возвращает массив объектов типа `T`, где `T` — это модель продукта.
- `getProductById<T>(productId: string): Promise<T>` — Запрашивает данные о конкретном продукте по его ID и возвращает объект типа `T`.
- `getCart<T>(): Promise<T[]>` — Запрашивает данные о текущей корзине пользователя и возвращает массив объектов типа `T`.
- `updateCart<T>(cartData: T[]): Promise<T[]>` — Отправляет запрос на обновление корзины и возвращает обновленный массив объектов типа `T`.
- `placeOrder<T>(orderData: T): Promise<T>` — Отправляет запрос на оформление заказа и возвращает объект типа `T` с данными о заказе.

#### Класс AppPresenter

Отвечает за взаимодействие между слоями представления и моделью данных. Обрабатывает события, генерируемые интерфейсом, и управляет взаимодействием между компонентами.

Конструктор класса:

- `constructor(api: AppApi, events: EventEmitter, productModal: ProductModal, cartModal: CartModal, orderModal: OrderDetailsModal, successModal: SuccessModal, cardsContainer: CardsContainer)` — Конструктор принимает экземпляры необходимых классов и инициализирует обработку событий.

Методы класса:

- `initialize(): void` — Инициализирует обработку событий и устанавливает начальное состояние представления.
- `handleProductSelect(productId: string): void` — Обрабатывает выбор товара для отображения в модальном окне. Запрашивает данные о товаре через `AppApi`, отображает информацию в `ProductModal`.
- `handleAddToCart(productId: string): void` — Обрабатывает добавление товара в корзину. Обновляет корзину через `AppApi` и отображает изменения в `CartModal`.
- `handleCartOpen(): void` — Открывает модальное окно корзины и отображает текущее состояние корзины.
- `handleOrderSubmit(orderData: OrderModel): void` — Обрабатывает оформление заказа. Отправляет данные через `AppApi`, получает подтверждение и отображает `SuccessModal`.
- `handleSuccess(): void` — Обрабатывает успешное завершение заказа, отображает соответствующее сообщение в `SuccessModal`.

Список событий

Изменение данных (генерируются моделями данных):

- `product:updated` — Изменение данных о продукте.
- `cart:updated` — Изменение содержимого корзины.
- `order:placed` — Оформление нового заказа.

Взаимодействие с интерфейсом (генерируются представлениями):

- `product:select` — Выбор товара для отображения в модальном окне.
- `cart:open` — Открытие модального окна корзины.
- `order:submit` — Оформление заказа.
- `order:success` — Подтверждение успешного завершения заказа. -->
